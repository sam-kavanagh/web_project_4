!function(){"use strict";var e={formSelector:".popup__form",inputSelector:".popup__input",inputTextError:"popup__input_has-error",inputVisibleError:"popup__text-error_visible",submitButtonSelector:".popup__submit-button",inactiveButtonClass:"popup__submit-button_disabled"};function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var n=function(){function e(t){var n=t.baseUrl,r=t.headers;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._baseUrl=n,this._headers=r}var n,r;return n=e,(r=[{key:"_handleServerResponse",value:function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}},{key:"getUserInfo",value:function(){return fetch("".concat(this._baseUrl,"/users/me"),{headers:this._headers}).then(this._handleServerResponse)}},{key:"setUserInfo",value:function(e){var t=e.name,n=e.description;return fetch("".concat(this._baseUrl,"/users/me "),{headers:this._headers,method:"PATCH",body:JSON.stringify({name:t,description:n})}).then(this._handleServerResponse)}},{key:"getCardList",value:function(e){var t=e.title,n=e.link;return fetch("".concat(this._baseUrl,"/cards"),{headers:this._headers,method:"POST",body:JSON.stringify({title:t,link:n})}).then(this._handleServerResponse)}},{key:"addCard",value:function(e){var t=e.title,n=e.link;return fetch("".concat(this._baseUrl,"/cards"),{headers:this._headers,method:"POST",body:JSON.stringify({title:t,link:n})}).then(this._handleServerResponse)}},{key:"setCardLikes",value:function(){return fetch("".concat(this._baseUrl,"/cards/likes/cardId"),{headers:this._headers}).then(this._handleServerResponse)}},{key:"toggleCardLikeStatus",value:function(e,t){return fetch("".concat(this._baseUrl,"/cards/likes/").concat(e),{headers:this._headers,method:t?"PUT":"DELETE"}).then(this._handleServerResponse)}},{key:"setUserAvatar",value:function(e){var t=e.avatar;return fetch("".concat(this._baseUrl,"/users/me/avatar "),{headers:this._headers,method:"PATCH",body:JSON.stringify({avatar:t})}).then(this._handleServerResponse)}}])&&t(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),e}();function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(){function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._items=r,this._renderer=o,this._container=document.querySelector(n)}var t,n;return t=e,(n=[{key:"renderItems",value:function(){this._items.forEach(this._renderer)}},{key:"addItem",value:function(e){this._container.prepend(e)}}])&&r(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function e(t,n){var r=t.data,o=t.handleCardClick;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._text=r.name,this._link=r.link,this._likes=r.like,this._userId=userId,this._authUserId=this._handleCardClick=o,this._cardSelector=n}var t,n;return t=e,(n=[{key:"_getTemplate",value:function(){return document.querySelector(this._cardSelector).content.querySelector(".element").cloneNode(!0)}},{key:"_setEventListeners",value:function(){var e=this;this._element.querySelector(".element__like-button").addEventListener("click",(function(t){e._handleLikeButton()})),this._element.querySelector(".element__trash-button").addEventListener("click",(function(t){e._handleTrashButton()})),this._element.querySelector(".element__image").addEventListener("click",(function(t){return e._handleCardClick({link:e._link,text:e._text})}))}},{key:"_handleLikeButton",value:function(){this._element.querySelector(".element__like-button").classList.toggle("element__like-button_full")}},{key:"_handleTrashButton",value:function(){this._element.remove(),this.element=null}},{key:"getView",value:function(){this._element=this._getTemplate(),this._setEventListeners();var e=this._element.querySelector(".element__image");return e.src=this._link,e.alt=this._text,this._element.querySelector(".element__title").textContent=this._text,this._element}},{key:"_uodateLikesView",value:function(){this._element.querySelector(".element__like-count").textContent=this._likes.length,this.isLiked()}}])&&i(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popupElement=document.querySelector(t),this._handleEscClose=this._handleEscClose.bind(this)}var t,n;return t=e,(n=[{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"setEventListeners",value:function(){var e=this;this._popupElement.addEventListener("mousedown",(function(t){(t.target.classList.contains("popup_open")||t.target.classList.contains("popup__close-button"))&&e.close()}))}},{key:"open",value:function(){this._popupElement.classList.add("popup_open"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popupElement.classList.remove("popup_open"),document.removeEventListener("keydown",this._handleEscClose)}}])&&s(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(){return p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=f(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},p.apply(this,arguments)}function f(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=y(e)););return e}function h(e,t){return h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},h(e,t)}function d(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}var _=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=y(r);if(o){var n=y(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return d(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e))._imageElement=t._popupElement.querySelector(".popup__preview-image"),t._imageCaption=t._popupElement.querySelector(".popup__caption"),t}return t=a,(n=[{key:"open",value:function(e){this._imageElement.src=e.link,this._imageCaption.textContent=e.text,this._imageElement.alt=e.text,p(y(a.prototype),"open",this).call(this)}}])&&c(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(u);function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(){return b="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=E(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},b.apply(this,arguments)}function E(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=S(e)););return e}function k(e,t){return k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},k(e,t)}function g(e,t){if(t&&("object"===m(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function S(e){return S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},S(e)}var w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&k(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=S(r);if(o){var n=S(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return g(this,e)});function a(e){var t,n=e.popupSelector,r=e.handleFormSubmit;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,n))._popupForm=t._popupElement.querySelector(".popup__form"),t._handleFormSubmit=r,t._inputList=t._popupElement.querySelectorAll(".popup__input"),t}return t=a,(n=[{key:"_getInputValues",value:function(){var e=this;return this._formValues={},this._inputList.forEach((function(t){return e._formValues[t.name]=t.value})),this._formValues}},{key:"setEventListeners",value:function(){var e=this;this._popupElement.addEventListener("submit",(function(t){t.preventDefault(),e._handleFormSubmit(e._getInputValues()),e.close()})),b(S(a.prototype),"setEventListeners",this).call(this)}},{key:"close",value:function(){this._popupForm.reset(),b(S(a.prototype),"close",this).call(this)}}])&&v(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(u);function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var L=function(){function e(t){var n=t.userNameSelector,r=t.userDescriptionSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._userNameElement=document.querySelector(n),this._userDescriptionElement=document.querySelector(r),this._userAvatarElement=document.querySelector(userAvatarSelector)}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{name:this._userNameElement.textContent,description:this._userDescriptionElement.textContent,avatar:this._userAvatarElement.style.backgroundImage}}},{key:"setUserInfo",value:function(e){var t=e.name,n=e.description,r=e.avatar;t&&(this._userNameElement.textContent=data.Name),n&&(this._userDescriptionElement.textContent=data.Description),r&&(this._userAvatarElement.src=r)}}])&&O(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var P,q=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._inputSelector=t.inputSelector,this._inputTextError=t.inputTextError,this._inputVisibleError=t.inputVisibleError,this._submitButtonSelector=t.submitButtonSelector,this._inactiveButtonClass=t.inactiveButtonClass,this._formEl=n}var t,n;return t=e,(n=[{key:"_addInputError",value:function(e){e.classList.add(this._inputTextError)}},{key:"_removeInputError",value:function(e){e.classList.remove(this._inputTextError)}},{key:"_showMessageError",value:function(e){var t=this._formEl.querySelector("#".concat(e.id,"-error"));t.textContent=e.validationMessage,t.classList.add(this._inputVisibleError)}},{key:"_hideMessageError",value:function(e){var t=this._formEl.querySelector("#".concat(e.id,"-error"));t.textContent=" ",t.classList.remove(this._inputVisibleError)}},{key:"_hasInvalidInput",value:function(e){return e.some((function(e){return!e.validity.valid}))}},{key:"_checkInputValidity",value:function(e){e.validity.valid?(this._hideMessageError(e),this._removeInputError(e)):(this._showMessageError(e),this._addInputError(e))}},{key:"_toggleButton",value:function(){this._hasInvalidInput(this._inputList)?(this._buttonEl.disabled=!0,this._buttonEl.classList.add(this._inactiveButtonClass)):(this._buttonEl.classList.remove(this._inactiveButtonClass),this._buttonEl.disabled=!1)}},{key:"_setEventListeners",value:function(){var e,t=this;this._inputList=function(e){if(Array.isArray(e))return j(e)}(e=this._formEl.querySelectorAll(this._inputSelector))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return j(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?j(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),this._buttonEl=this._formEl.querySelector(this._submitButtonSelector),this._inputList.forEach((function(e){e.addEventListener("input",(function(){t._checkInputValidity(e),t._toggleButton()}))})),this.resetValidation()}},{key:"resetValidation",value:function(){var e=this;this._inputList.forEach((function(t){e._hideMessageError(t),e._removeInputError(t)})),this._toggleButton()}},{key:"enableValidation",value:function(){this._formEl.addEventListener("submit",(function(e){e.preventDefault()})),this._setEventListeners()}}])&&C(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),x=document.querySelector(".profile__edit-button"),I=document.querySelector(".profile__add-button"),T=(document.querySelector("#card-template"),document.querySelector(".elements"),document.querySelector("#name-input"),document.querySelector("#description-input"),document.querySelector("#profile-avatar-popup")),R=document.querySelector(".profile__edit-button_type-avatar"),V=new n({baseUrl:"https://around.nomoreparties.co/v1/group-12",headers:{authorization:"816a5952-0b40-4365-b524-9e18859b6d37","Content-Type":"application/json"}});P=fetch(V),console.log(P);var B=new _("#popup-preview"),U=function(e){return new a({data:{name:e.name||e.title,link:e.link},handleCardClick:function(e){B.open(e)}},"#card-template").getView()},A=new o({items:[{name:"Yosemite Valley",link:"https://code.s3.yandex.net/web-code/yosemite.jpg"},{name:"Lake Louise",link:"https://code.s3.yandex.net/web-code/lake-louise.jpg"},{name:"Bald Mountains",link:"https://code.s3.yandex.net/web-code/bald-mountains.jpg"},{name:"Latemar",link:"https://code.s3.yandex.net/web-code/latemar.jpg"},{name:"Vanoise National Park",link:"https://code.s3.yandex.net/web-code/vanoise.jpg"},{name:"Lago di Braies",link:"https://code.s3.yandex.net/web-code/lago.jpg"}],renderer:function(e){A.addItem(U(e))}},".elements"),D=new L({userNameSelector:"#edit-card-name",userDescriptionSelector:"#edit-card-description",userAvatarSelector:"#profile-avatar-button"}),N=new w({popupSelector:"#edit-profile-popup",handleFormSubmit:function(e){D.setUserInfo(e)}}),M=new w({popupSelector:"#add-card-popup",handleFormSubmit:function(e){A.addItem(U(e))}}),F=new q(e,document.querySelector("#edit-profile-form")),J=new q(e,document.querySelector("#new-card-form"));x.addEventListener("click",(function(e){var t=D.getUserInfo();document.querySelector("#name-input").setAttribute("value",t.name),document.querySelector("#description-input").setAttribute("value",t.description),N.open(t)})),I.addEventListener("click",(function(e){M.open(),J.resetValidation()})),R.addEventListener("click",(function(e){T.open(),J.resetValidation()})),A.renderItems(),B.setEventListeners(),N.setEventListeners(),M.setEventListeners(),F.enableValidation(),J.enableValidation()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEVBQWtCTyxtQkFDbEJOLEVBQWtCTSxtQiIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYl9wcm9qZWN0XzgvLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzgvLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfOC8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfOC8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfOC8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzgvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF84Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF84Ly4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfOC8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF84Ly4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgaW5pdGlhbENhcmRzID0gW1xuICB7XG4gICAgbmFtZTogXCJZb3NlbWl0ZSBWYWxsZXlcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL3lvc2VtaXRlLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJMYWtlIExvdWlzZVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvbGFrZS1sb3Vpc2UuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkJhbGQgTW91bnRhaW5zXCIsXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9iYWxkLW1vdW50YWlucy5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvbGF0ZW1hci5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiVmFub2lzZSBOYXRpb25hbCBQYXJrXCIsXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS92YW5vaXNlLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJMYWdvIGRpIEJyYWllc1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvbGFnby5qcGdcIixcbiAgfSxcbl07XG5cbmV4cG9ydCBjb25zdCB2YWxpZGF0aW9uU2V0dGluZ3MgPSB7XG4gIGZvcm1TZWxlY3RvcjogXCIucG9wdXBfX2Zvcm1cIixcbiAgaW5wdXRTZWxlY3RvcjogXCIucG9wdXBfX2lucHV0XCIsXG4gIGlucHV0VGV4dEVycm9yOiBcInBvcHVwX19pbnB1dF9oYXMtZXJyb3JcIixcbiAgaW5wdXRWaXNpYmxlRXJyb3I6IFwicG9wdXBfX3RleHQtZXJyb3JfdmlzaWJsZVwiLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIucG9wdXBfX3N1Ym1pdC1idXR0b25cIixcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJwb3B1cF9fc3VibWl0LWJ1dHRvbl9kaXNhYmxlZFwiLFxufTsiLCJjbGFzcyBBcGkge1xuICBjb25zdHJ1Y3Rvcih7YmFzZVVybCwgaGVhZGVyc30pIHtcbiAgICB0aGlzLl9iYXNlVXJsID0gYmFzZVVybDtcbiAgICB0aGlzLl9oZWFkZXJzID0gaGVhZGVycztcbiAgfVxuXG4vL2FkZCAke3Jlcy5zdGF0dXN9IHRvIGluZGV4IGZpbGUgdG8gYmUgcGlja2VkIHVwXG5faGFuZGxlU2VydmVyUmVzcG9uc2UocmVzKSB7XG4gIHJldHVybiByZXMub2s/IHJlcy5qc29uKCkgOiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcbn1cblxuIGdldFVzZXJJbmZvKCkge1xuICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xuICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pLnRoZW4odGhpcy5faGFuZGxlU2VydmVyUmVzcG9uc2UpO1xuIH1cblxuIHNldFVzZXJJbmZvKHtuYW1lLCBkZXNjcmlwdGlvbn0pIHtcbiAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZSBgLCB7XG4gICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgbmFtZSxcbiAgICAgICBkZXNjcmlwdGlvbixcbiAgICAgfSksXG4gICB9KS50aGVuKHRoaXMuX2hhbmRsZVNlcnZlclJlc3BvbnNlKTtcbiB9XG5cbiBnZXRDYXJkTGlzdCh7dGl0bGUsbGlua30pIHtcbiAgIHJldHVybiBmZXRjaCAoYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XG4gICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICB0aXRsZSxcbiAgICAgICBsaW5rLFxuICAgICB9KSxcbiAgIH0pLnRoZW4odGhpcy5faGFuZGxlU2VydmVyUmVzcG9uc2UpO1xuIH1cblxuIGFkZENhcmQoe3RpdGxlLGxpbmt9KSB7XG4gICByZXR1cm4gZmV0Y2ggKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xuICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgdGl0bGUsXG4gICAgICAgbGluayxcbiAgICAgfSksXG4gICB9KS50aGVuKHRoaXMuX2hhbmRsZVNlcnZlclJlc3BvbnNlKTtcbiB9XG5cbiBzZXRDYXJkTGlrZXMoKSB7XG4gICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvbGlrZXMvY2FyZElkYCwge1xuICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pLnRoZW4odGhpcy5faGFuZGxlU2VydmVyUmVzcG9uc2UpO1xuIH1cblxudG9nZ2xlQ2FyZExpa2VTdGF0dXMoY2FyZElkLCBsaWtlKSB7XG4gICByZXR1cm4gZmV0Y2ggKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzL2xpa2VzLyR7Y2FyZElkfWAsIHtcbiAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgbWV0aG9kOiBsaWtlID8gXCJQVVRcIiA6IFwiREVMRVRFXCIsXG4gICB9KS50aGVuKHRoaXMuX2hhbmRsZVNlcnZlclJlc3BvbnNlKTtcbiB9XG5cblxuc2V0VXNlckF2YXRhcih7YXZhdGFyfSkge1xuICAgcmV0dXJuIGZldGNoIChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZS9hdmF0YXIgYCwge1xuICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgIGF2YXRhcixcbiAgICAgfSksXG4gICB9KS50aGVuKHRoaXMuX2hhbmRsZVNlcnZlclJlc3BvbnNlKTtcbiB9XG5cblxuLy8gICBkZWxldGVDYXJkKGlkKSB7XG4vLyAgICByZXR1cm4gZmV0Y2ggKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfWAsIHtcbi8vICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbi8vICAgICAgbWV0aG9kOiBcIkRFTEVURVwiXG4vLyAgICB9KS50aGVuKHRoaXMuX2hhbmRsZVNlcnZlclJlc3BvbnNlKTtcbi8vICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEFwaTtcbiIsImNsYXNzIFNlY3Rpb24ge1xuICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBjb250YWluZXJzZWxlY3Rvcikge1xuICAgIHRoaXMuX2l0ZW1zID0gaXRlbXM7XG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcblxuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyc2VsZWN0b3IpO1xufVxuXG4gIHJlbmRlckl0ZW1zKCkge1xuICAgIHRoaXMuX2l0ZW1zLmZvckVhY2godGhpcy5fcmVuZGVyZXIpO1xuICB9XG5cbiAgYWRkSXRlbShlbGVtZW50KSB7XG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgU2VjdGlvbjtcbiIsImltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xuXG5jbGFzcyBDYXJkIHtcbiAgY29uc3RydWN0b3IoeyBkYXRhLCBoYW5kbGVDYXJkQ2xpY2sgfSwgY2FyZFNlbGVjdG9yKSB7XG4gICAgdGhpcy5fdGV4dCA9IGRhdGEubmFtZTtcbiAgICB0aGlzLl9saW5rID0gZGF0YS5saW5rO1xuICAgIHRoaXMuX2xpa2VzID0gZGF0YS5saWtlO1xuICAgIHRoaXMuX3VzZXJJZCA9IHVzZXJJZDtcbiAgICB0aGlzLl9hdXRoVXNlcklkID0gXG4gICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xuXG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xuICB9XG5cbiAgX2dldFRlbXBsYXRlKCkge1xuICBcdGNvbnN0IGNhcmRFbGVtZW50ID0gZG9jdW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcilcbiAgICAgIC5jb250ZW50XG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50XCIpXG4gICAgICAuY2xvbmVOb2RlKHRydWUpO1xuXG4gICAgcmV0dXJuIGNhcmRFbGVtZW50O1xuICB9XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkgeyBcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9fbGlrZS1idXR0b25cIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldnQpID0+IHsgXG4gICAgICB0aGlzLl9oYW5kbGVMaWtlQnV0dG9uKCk7IFxuICAgIH0pOyBcblxuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X190cmFzaC1idXR0b25cIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldnQpID0+IHsgXG4gICAgICB0aGlzLl9oYW5kbGVUcmFzaEJ1dHRvbigpOyBcbiAgICB9KTsgXG5cbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9faW1hZ2VcIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldnQpID0+IFxuICAgICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrICh7IFxuICAgICAgICBsaW5rOiB0aGlzLl9saW5rLCBcbiAgICAgICAgdGV4dDogdGhpcy5fdGV4dCwgXG4gICAgICAgIH0pIFxuICAgICk7IFxuICB9IFxuXG4gIF9oYW5kbGVMaWtlQnV0dG9uKCkge1xuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X19saWtlLWJ1dHRvblwiKS5jbGFzc0xpc3QudG9nZ2xlKFwiZWxlbWVudF9fbGlrZS1idXR0b25fZnVsbFwiKTtcbiAgfVxuICBcbiAgX2hhbmRsZVRyYXNoQnV0dG9uKCkge1xuICAgIHRoaXMuX2VsZW1lbnQucmVtb3ZlKCk7XG5cbiAgICB0aGlzLmVsZW1lbnQgPSBudWxsO1xuICB9XG5cbiAgZ2V0VmlldygpIHtcbiAgICB0aGlzLl9lbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuXG4gICAgY29uc3QgY2FyZEltYWdlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX2ltYWdlXCIpO1xuICAgIGNhcmRJbWFnZS5zcmMgPSB0aGlzLl9saW5rO1xuICAgIGNhcmRJbWFnZS5hbHQgPSB0aGlzLl90ZXh0OyBcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9fdGl0bGVcIikudGV4dENvbnRlbnQgPSB0aGlzLl90ZXh0O1xuXG4gICAgcmV0dXJuIHRoaXMuX2VsZW1lbnQ7XG4gIH1cblxuICBfdW9kYXRlTGlrZXNWaWV3KCkge1xuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X19saWtlLWNvdW50XCIpLnRleHRDb250ZW50ID1cbiAgICB0aGlzLl9saWtlcy5sZW5ndGg7XG5cbiAgICBpZiAodGhpcy5pc0xpa2VkKCkpXG4gICAgdGhpc1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IENhcmQ7XG4iLCJjbGFzcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlID0gdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKTtcbiAgfSAgICBcblxuICBfaGFuZGxlRXNjQ2xvc2UoZXZ0KSB7XG4gICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCAoZXZ0KSA9PiB7XG4gICAgICBpZiAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJwb3B1cF9vcGVuXCIpIHx8IGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwicG9wdXBfX2Nsb3NlLWJ1dHRvblwiKSlcbiAgICAgICAge1xuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBvcGVuKCkge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwicG9wdXBfb3BlblwiKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcInBvcHVwX29wZW5cIik7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFBvcHVwO1xuXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXAuanNcIjtcblxuY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XG4gICAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgICB0aGlzLl9pbWFnZUVsZW1lbnQgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fcHJldmlldy1pbWFnZVwiKTtcbiAgICAgIHRoaXMuX2ltYWdlQ2FwdGlvbiA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19jYXB0aW9uXCIpO1xuICAgICAgfVxuXG4gIG9wZW4oZGF0YSkge1xuICAgIHRoaXMuX2ltYWdlRWxlbWVudC5zcmMgPSBkYXRhLmxpbms7XG4gICAgdGhpcy5faW1hZ2VDYXB0aW9uLnRleHRDb250ZW50ID0gZGF0YS50ZXh0O1xuICAgIHRoaXMuX2ltYWdlRWxlbWVudC5hbHQgPSBkYXRhLnRleHQ7XG4gICAgc3VwZXIub3BlbigpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFBvcHVwV2l0aEltYWdlOyIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cC5qc1wiO1xuXG5jbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcih7cG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdH0pIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICBcbiAgICB0aGlzLl9wb3B1cEZvcm0gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZm9ybVwiKTtcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcbiAgICB0aGlzLl9pbnB1dExpc3QgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5wb3B1cF9faW5wdXRcIik7XG5cbiAgfVxuXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcbiAgICB0aGlzLl9mb3JtVmFsdWVzID0ge307IFxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKCBcbiAgICAgIChpbnB1dCkgPT4gKHRoaXMuX2Zvcm1WYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZSlcbiAgICApOyBcblxuICAgIHJldHVybiB0aGlzLl9mb3JtVmFsdWVzO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7IFxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHsgXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTsgXG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpOyBcblxuICAgICAgdGhpcy5jbG9zZSgpOyBcbiAgICB9KTsgXG5cbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICB9IFxuXG4gIGNsb3NlKCkgeyBcbiAgICB0aGlzLl9wb3B1cEZvcm0ucmVzZXQoKTsgXG5cbiAgICBzdXBlci5jbG9zZSgpOyBcblxuICB9IFxufSBcblxuIFxuXG5leHBvcnQgZGVmYXVsdCBQb3B1cFdpdGhGb3JtOyIsImNsYXNzIFVzZXJJbmZvIHtcbiAgY29uc3RydWN0b3IoeyB1c2VyTmFtZVNlbGVjdG9yLCB1c2VyRGVzY3JpcHRpb25TZWxlY3RvciB9KSB7XG4gICAgdGhpcy5fdXNlck5hbWVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih1c2VyTmFtZVNlbGVjdG9yKTtcbiAgICB0aGlzLl91c2VyRGVzY3JpcHRpb25FbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih1c2VyRGVzY3JpcHRpb25TZWxlY3Rvcik7XG4gICAgdGhpcy5fdXNlckF2YXRhckVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHVzZXJBdmF0YXJTZWxlY3Rvcik7XG4gIH1cblxuICBnZXRVc2VySW5mbygpIHtcbiAgICByZXR1cm4geyBcbiAgICAgIG5hbWU6IHRoaXMuX3VzZXJOYW1lRWxlbWVudC50ZXh0Q29udGVudCwgXG4gICAgICBkZXNjcmlwdGlvbjogdGhpcy5fdXNlckRlc2NyaXB0aW9uRWxlbWVudC50ZXh0Q29udGVudCwgXG4gICAgICBhdmF0YXI6IHRoaXMuX3VzZXJBdmF0YXJFbGVtZW50LnN0eWxlLmJhY2tncm91bmRJbWFnZSxcbiAgICB9OyBcbiAgfSBcblxuICBzZXRVc2VySW5mbyh7bmFtZSwgZGVzY3JpcHRpb24sIGF2YXRhcn0pIHsgXG4gICAgaWYgKG5hbWUpIHRoaXMuX3VzZXJOYW1lRWxlbWVudC50ZXh0Q29udGVudCA9IGRhdGEuTmFtZTsgXG4gICAgaWYgKGRlc2NyaXB0aW9uKSB0aGlzLl91c2VyRGVzY3JpcHRpb25FbGVtZW50LnRleHRDb250ZW50ID0gZGF0YS5EZXNjcmlwdGlvbjsgXG4gICAgaWYgKGF2YXRhcikgdGhpcy5fdXNlckF2YXRhckVsZW1lbnQuc3JjID0gYXZhdGFyO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFVzZXJJbmZvO1xuXG4vLyAgIHNldFVzZXJJbmZvKGRhdGEpIHsgXG4vLyAgICAgdGhpcy5fdXNlck5hbWVFbGVtZW50LnRleHRDb250ZW50ID0gZGF0YS5OYW1lOyBcbi8vICAgICB0aGlzLl91c2VyRGVzY3JpcHRpb25FbGVtZW50LnRleHRDb250ZW50ID0gZGF0YS5EZXNjcmlwdGlvbjsgXG4vLyAgICAgdGhpcy5fdXNlckF2YXRhckVsZW1lbnQuc3JjID0gYXZhdGFyO1xuLy8gICB9XG4vLyB9IiwiaW1wb3J0IFwiLi4vcGFnZXMvaW5kZXguY3NzXCI7XG5cbi8vaW1wb3J0IGFsbCBjbGFzc2VzXG5pbXBvcnQge2luaXRpYWxDYXJkcywgdmFsaWRhdGlvblNldHRpbmdzfSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XG5pbXBvcnQgQXBpIGZyb20gXCIuLi9jb21wb25lbnRzL0FwaS5qc1wiO1xuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvblwiO1xuaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoRm9ybVN1Ym1pdCBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtU3VibWl0LmpzXCI7XG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcblxuY29uc3QgZWRpdFByb2ZpbGVCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2VkaXQtYnV0dG9uXCIpO1xuY29uc3QgYWRkQ2FyZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ1dHRvblwiKTtcbmNvbnN0IGNhcmRTZWxlY3RvciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZC10ZW1wbGF0ZVwiKTtcbmNvbnN0IGNhcmRMaXN0U2VsZWN0b3IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRzXCIpO1xuY29uc3QgbmFtZUlucHV0RWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI25hbWUtaW5wdXRcIik7XG5jb25zdCBkZXNjcmlwdGlvbklucHV0RWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2Rlc2NyaXB0aW9uLWlucHV0XCIpO1xuY29uc3QgcHJvZmlsZUF2YXRhclBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWF2YXRhci1wb3B1cFwiKTtcbmNvbnN0IHByb2ZpbGVBdmF0YXJCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2VkaXQtYnV0dG9uX3R5cGUtYXZhdGFyXCIpO1xuLypjcmVhdGUgaW5zdGFuY2VzIG9mIHRoZSBjbGFzc2VzICovXG5cbi8vQXBpIGluc3RhbmNlXG5jb25zdCBhcGkgPSBuZXcgQXBpKHtcbiAgYmFzZVVybDogXCJodHRwczovL2Fyb3VuZC5ub21vcmVwYXJ0aWVzLmNvL3YxL2dyb3VwLTEyXCIsXG4gIGhlYWRlcnM6IHtcbiAgICBhdXRob3JpemF0aW9uOiBcIjgxNmE1OTUyLTBiNDAtNDM2NS1iNTI0LTllMTg4NTliNmQzN1wiLFxuICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICB9LFxufSk7XG5cblxuY29uc3QgZ2V0QXBpID0gKCkgPT4ge1xuICBjb25zdCBnZXQgPSBmZXRjaCAoYXBpKTtcbiAgY29uc29sZS5sb2cgKGdldClcbn1cblxuZ2V0QXBpKCk7XG5cbi8vUG9wdXAgd2l0aCBmb3JtIHN1Ym1pdCBpbnN0YW5jZVxuXG4vL1BvcHVwV2l0aEltYWdlIGluc3RhbmNlXG5jb25zdCBjYXJkUHJldmlldyA9IG5ldyBQb3B1cFdpdGhJbWFnZShcIiNwb3B1cC1wcmV2aWV3XCIpO1xuXG4vL0NhcmQgaW5zdGFuY2VcbmNvbnN0IGNyZWF0ZU5ld0NhcmQgPSAoZGF0YSkgPT4ge1xuICAgICAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKFxuICAgIHtcbiAgICAgIGRhdGE6IHsgbmFtZTogZGF0YS5uYW1lIHx8IGRhdGEudGl0bGUsIGxpbms6IGRhdGEubGluayB9LFxuICAgICAgaGFuZGxlQ2FyZENsaWNrOiAoaW1nRGF0YSkgPT4ge1xuICAgICAgICBjYXJkUHJldmlldy5vcGVuKGltZ0RhdGEpO1xuICAgICAgfSxcbiAgICB9LFxuICAgIFwiI2NhcmQtdGVtcGxhdGVcIlxuICApO1xuICByZXR1cm4gY2FyZC5nZXRWaWV3KCk7XG59XG5cbi8vU2VjdGlvbiBpbnN0YW5jZVxuY29uc3QgY2FyZFNlY3Rpb24gPSBuZXcgU2VjdGlvbihcbiAge1xuICAgIGl0ZW1zOiBpbml0aWFsQ2FyZHMsXG4gICAgcmVuZGVyZXI6IChkYXRhKSA9PiB7XG4gICAgICBjYXJkU2VjdGlvbi5hZGRJdGVtKGNyZWF0ZU5ld0NhcmQoZGF0YSkpO1xuICAgIH0sXG4gIH0sXG4gIFwiLmVsZW1lbnRzXCJcbik7XG5cbi8vVXNlckluZm8gaW5zdGFuY2VcbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtcbiAgdXNlck5hbWVTZWxlY3RvcjogXCIjZWRpdC1jYXJkLW5hbWVcIixcbiAgdXNlckRlc2NyaXB0aW9uU2VsZWN0b3I6IFwiI2VkaXQtY2FyZC1kZXNjcmlwdGlvblwiLFxuICB1c2VyQXZhdGFyU2VsZWN0b3I6IFwiI3Byb2ZpbGUtYXZhdGFyLWJ1dHRvblwiLFxufSk7XG5cbi8vUG9wdXBXaXRoRm9ybSBpbnN0YW5jZSBmb3IgZWRpdCBwcm9maWxlIHBvcHVwXG5jb25zdCB1c2VySW5mb1BvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xuICBwb3B1cFNlbGVjdG9yOiBcIiNlZGl0LXByb2ZpbGUtcG9wdXBcIixcbiAgaGFuZGxlRm9ybVN1Ym1pdDogKGRhdGEpID0+IHsgICBcbiAgICB1c2VySW5mby5zZXRVc2VySW5mbyhkYXRhKTtcbiAgfSxcbn0pO1xuXG4vL1BvcHVwV2l0aEZvcm0gaW5zdGFuY2UgbmV3IGNhcmQgcG9wdXBcbmNvbnN0IG5ld0NhcmRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcbiAgcG9wdXBTZWxlY3RvcjogXCIjYWRkLWNhcmQtcG9wdXBcIixcbiAgaGFuZGxlRm9ybVN1Ym1pdDogKGRhdGEpID0+IHtcbiAgICBjYXJkU2VjdGlvbi5hZGRJdGVtKGNyZWF0ZU5ld0NhcmQoZGF0YSkpOyBcbiAgfSwgXG59KTsgXG5cbi8vL0Zvcm1WYWxpZGF0b3IgaW5zdGFuY2VcbmNvbnN0IGVkaXRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoXG4gIHZhbGlkYXRpb25TZXR0aW5ncyxcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNlZGl0LXByb2ZpbGUtZm9ybVwiKVxuKTtcblxuY29uc3QgY2FyZEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihcbiAgdmFsaWRhdGlvblNldHRpbmdzLFxuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI25ldy1jYXJkLWZvcm1cIilcbik7XG5cblxuLypldmVudCBsaXN0ZW5lcnMgZm9yIHBhZ2UqL1xuXG4vL2VkaXQgcHJvZmlsZSBvcGVuIHBvcHVwIFxuZWRpdFByb2ZpbGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldnQpID0+IHtcbiAgY29uc3QgY3VycmVudFVzZXJpbmZvID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNuYW1lLWlucHV0XCIpLnNldEF0dHJpYnV0ZSgndmFsdWUnLCBjdXJyZW50VXNlcmluZm9bJ25hbWUnXSk7XG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZGVzY3JpcHRpb24taW5wdXRcIikuc2V0QXR0cmlidXRlKCd2YWx1ZScsIGN1cnJlbnRVc2VyaW5mb1snZGVzY3JpcHRpb24nXSk7XG5cbiAgdXNlckluZm9Qb3B1cC5vcGVuKGN1cnJlbnRVc2VyaW5mbyk7XG59KTtcblxuLy9uZXcgY2FyZCBvcGVuIHBvcHVwIFxuYWRkQ2FyZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2dCkgPT4ge1xuICBuZXdDYXJkUG9wdXAub3BlbigpO1xuXG4gIGNhcmRGb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xufSk7XG5cbi8vZWRpdCBwcm9maWxlIGltYWdlICBwb3B1cCBcbnByb2ZpbGVBdmF0YXJCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldnQpID0+IHtcbiAgcHJvZmlsZUF2YXRhclBvcHVwLm9wZW4oKTtcblxuICBjYXJkRm9ybVZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKTtcbn0pO1xuXG5cbi8vaW5pdGlhbGl6ZSBhbGwgbXkgaW5zdGFuY2VzXG5jYXJkU2VjdGlvbi5yZW5kZXJJdGVtcygpO1xuY2FyZFByZXZpZXcuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbnVzZXJJbmZvUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbm5ld0NhcmRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuZWRpdEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuY2FyZEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuIiwiY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gIGNvbnN0cnVjdG9yKHNldHRpbmdzLCBmb3JtRWwpIHtcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gc2V0dGluZ3MuaW5wdXRTZWxlY3RvcjtcbiAgICB0aGlzLl9pbnB1dFRleHRFcnJvciA9IHNldHRpbmdzLmlucHV0VGV4dEVycm9yO1xuICAgIHRoaXMuX2lucHV0VmlzaWJsZUVycm9yID0gc2V0dGluZ3MuaW5wdXRWaXNpYmxlRXJyb3I7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBzZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcbiAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcztcblxuICAgIHRoaXMuX2Zvcm1FbCA9IGZvcm1FbDtcbiAgfVxuXG4gIF9hZGRJbnB1dEVycm9yKGlucHV0RWwpIHtcbiAgICBpbnB1dEVsLmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRUZXh0RXJyb3IpO1xuICB9XG5cbiAgX3JlbW92ZUlucHV0RXJyb3IoaW5wdXRFbCkge1xuICAgIGlucHV0RWwuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dFRleHRFcnJvcik7XG4gIH1cblxuICBfc2hvd01lc3NhZ2VFcnJvcihpbnB1dEVsKSB7XG4gICAgY29uc3QgZXJyb3JEaXNwbGF5ID0gdGhpcy5fZm9ybUVsLnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWwuaWR9LWVycm9yYCk7XG4gICAgZXJyb3JEaXNwbGF5LnRleHRDb250ZW50ID0gaW5wdXRFbC52YWxpZGF0aW9uTWVzc2FnZTtcbiAgICBlcnJvckRpc3BsYXkuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dFZpc2libGVFcnJvcik7XG4gIH1cblxuICBfaGlkZU1lc3NhZ2VFcnJvcihpbnB1dEVsKSB7XG4gICAgY29uc3QgZXJyb3JEaXNwbGF5ID0gdGhpcy5fZm9ybUVsLnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWwuaWR9LWVycm9yYCk7XG4gICAgZXJyb3JEaXNwbGF5LnRleHRDb250ZW50ID0gXCIgXCI7XG4gICAgZXJyb3JEaXNwbGF5LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRWaXNpYmxlRXJyb3IpO1xuICB9XG5cbiAgX2hhc0ludmFsaWRJbnB1dChpbnB1dExpc3QpIHtcbiAgICByZXR1cm4gaW5wdXRMaXN0LnNvbWUoKGlucHV0RWwpID0+IHtcbiAgICAgIHJldHVybiAhaW5wdXRFbC52YWxpZGl0eS52YWxpZDtcbiAgICB9KTtcbiAgfVxuXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbCkge1xuICAgIGlmIChpbnB1dEVsLnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgICB0aGlzLl9oaWRlTWVzc2FnZUVycm9yKGlucHV0RWwpO1xuICAgICAgdGhpcy5fcmVtb3ZlSW5wdXRFcnJvcihpbnB1dEVsKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fc2hvd01lc3NhZ2VFcnJvcihpbnB1dEVsKTtcbiAgICAgIHRoaXMuX2FkZElucHV0RXJyb3IoaW5wdXRFbCk7XG4gICAgfVxuICB9XG5cbiAgX3RvZ2dsZUJ1dHRvbigpIHtcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KHRoaXMuX2lucHV0TGlzdCkpIHtcbiAgICAgIHRoaXMuX2J1dHRvbkVsLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgIHRoaXMuX2J1dHRvbkVsLmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2J1dHRvbkVsLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgICB0aGlzLl9idXR0b25FbC5kaXNhYmxlZCA9IGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBbLi4udGhpcy5fZm9ybUVsLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcildO1xuXG4gICAgdGhpcy5fYnV0dG9uRWwgPSB0aGlzLl9mb3JtRWwucXVlcnlTZWxlY3Rvcih0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3Rvcik7XG5cbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbCkgPT4ge1xuICAgICAgaW5wdXRFbC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbCk7XG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvbigpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gICAgdGhpcy5yZXNldFZhbGlkYXRpb24oKTtcbiAgfVxuXG4gIHJlc2V0VmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbCkgPT4ge1xuICAgICAgdGhpcy5faGlkZU1lc3NhZ2VFcnJvcihpbnB1dEVsKTtcbiAgICAgIHRoaXMuX3JlbW92ZUlucHV0RXJyb3IoaW5wdXRFbCk7IFxuICB9KVxuIC8vIHRvZ2dsZSBidXR0b24gc3RhdGVcbiAgdGhpcy5fdG9nZ2xlQnV0dG9uKCk7IFxuICB9XG5cbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLl9mb3JtRWwuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9KTtcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEZvcm1WYWxpZGF0b3I7XG4iXSwibmFtZXMiOlsidmFsaWRhdGlvblNldHRpbmdzIiwiZm9ybVNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsImlucHV0VGV4dEVycm9yIiwiaW5wdXRWaXNpYmxlRXJyb3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJBcGkiLCJiYXNlVXJsIiwiaGVhZGVycyIsInRoaXMiLCJfYmFzZVVybCIsIl9oZWFkZXJzIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsImZldGNoIiwidGhlbiIsIl9oYW5kbGVTZXJ2ZXJSZXNwb25zZSIsIm5hbWUiLCJkZXNjcmlwdGlvbiIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwidGl0bGUiLCJsaW5rIiwiY2FyZElkIiwibGlrZSIsImF2YXRhciIsIlNlY3Rpb24iLCJjb250YWluZXJzZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiZm9yRWFjaCIsImVsZW1lbnQiLCJwcmVwZW5kIiwiQ2FyZCIsImNhcmRTZWxlY3RvciIsImRhdGEiLCJoYW5kbGVDYXJkQ2xpY2siLCJfdGV4dCIsIl9saW5rIiwiX2xpa2VzIiwiX3VzZXJJZCIsInVzZXJJZCIsIl9hdXRoVXNlcklkIiwiX2hhbmRsZUNhcmRDbGljayIsIl9jYXJkU2VsZWN0b3IiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX2VsZW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwiZXZ0IiwiX2hhbmRsZUxpa2VCdXR0b24iLCJfaGFuZGxlVHJhc2hCdXR0b24iLCJ0ZXh0IiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwicmVtb3ZlIiwiX2dldFRlbXBsYXRlIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiY2FyZEltYWdlIiwic3JjIiwiYWx0IiwidGV4dENvbnRlbnQiLCJsZW5ndGgiLCJpc0xpa2VkIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwRWxlbWVudCIsIl9oYW5kbGVFc2NDbG9zZSIsImJpbmQiLCJrZXkiLCJjbG9zZSIsInRhcmdldCIsImNvbnRhaW5zIiwiYWRkIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIlBvcHVwV2l0aEltYWdlIiwiX2ltYWdlRWxlbWVudCIsIl9pbWFnZUNhcHRpb24iLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlRm9ybVN1Ym1pdCIsIl9wb3B1cEZvcm0iLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9pbnB1dExpc3QiLCJxdWVyeVNlbGVjdG9yQWxsIiwiX2Zvcm1WYWx1ZXMiLCJpbnB1dCIsInZhbHVlIiwicHJldmVudERlZmF1bHQiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJyZXNldCIsIlVzZXJJbmZvIiwidXNlck5hbWVTZWxlY3RvciIsInVzZXJEZXNjcmlwdGlvblNlbGVjdG9yIiwiX3VzZXJOYW1lRWxlbWVudCIsIl91c2VyRGVzY3JpcHRpb25FbGVtZW50IiwiX3VzZXJBdmF0YXJFbGVtZW50IiwidXNlckF2YXRhclNlbGVjdG9yIiwic3R5bGUiLCJiYWNrZ3JvdW5kSW1hZ2UiLCJOYW1lIiwiRGVzY3JpcHRpb24iLCJnZXQiLCJGb3JtVmFsaWRhdG9yIiwic2V0dGluZ3MiLCJmb3JtRWwiLCJfaW5wdXRTZWxlY3RvciIsIl9pbnB1dFRleHRFcnJvciIsIl9pbnB1dFZpc2libGVFcnJvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2Zvcm1FbCIsImlucHV0RWwiLCJlcnJvckRpc3BsYXkiLCJpZCIsInZhbGlkYXRpb25NZXNzYWdlIiwiaW5wdXRMaXN0Iiwic29tZSIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGlkZU1lc3NhZ2VFcnJvciIsIl9yZW1vdmVJbnB1dEVycm9yIiwiX3Nob3dNZXNzYWdlRXJyb3IiLCJfYWRkSW5wdXRFcnJvciIsIl9oYXNJbnZhbGlkSW5wdXQiLCJfYnV0dG9uRWwiLCJkaXNhYmxlZCIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJfdG9nZ2xlQnV0dG9uIiwicmVzZXRWYWxpZGF0aW9uIiwiZWRpdFByb2ZpbGVCdXR0b24iLCJhZGRDYXJkQnV0dG9uIiwicHJvZmlsZUF2YXRhclBvcHVwIiwicHJvZmlsZUF2YXRhckJ1dHRvbiIsImFwaSIsImF1dGhvcml6YXRpb24iLCJjb25zb2xlIiwibG9nIiwiY2FyZFByZXZpZXciLCJjcmVhdGVOZXdDYXJkIiwiaW1nRGF0YSIsIm9wZW4iLCJnZXRWaWV3IiwiY2FyZFNlY3Rpb24iLCJhZGRJdGVtIiwidXNlckluZm8iLCJ1c2VySW5mb1BvcHVwIiwic2V0VXNlckluZm8iLCJuZXdDYXJkUG9wdXAiLCJlZGl0Rm9ybVZhbGlkYXRvciIsImNhcmRGb3JtVmFsaWRhdG9yIiwiY3VycmVudFVzZXJpbmZvIiwiZ2V0VXNlckluZm8iLCJzZXRBdHRyaWJ1dGUiLCJyZW5kZXJJdGVtcyIsInNldEV2ZW50TGlzdGVuZXJzIiwiZW5hYmxlVmFsaWRhdGlvbiJdLCJzb3VyY2VSb290IjoiIn0=