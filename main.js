!function(){"use strict";var e={formSelector:".popup__form",inputSelector:".popup__input",inputTextError:"popup__input_has-error",inputVisibleError:"popup__text-error_visible",submitButtonSelector:".popup__submit-button",inactiveButtonClass:"popup__submit-button_disabled"};function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var n=function(){function e(t){var n=t.baseUrl,r=t.headers;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._baseUrl=n,this._headers=r}var n,r;return n=e,(r=[{key:"_handleServerResponse",value:function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}},{key:"getUserInfo",value:function(){return fetch("".concat(this._baseUrl,"/users/me"),{headers:this._headers}).then(this._handleServerResponse)}},{key:"setUserInfo",value:function(e){var t=e.name,n=e.description;return fetch("".concat(this._baseUrl,"/users/me "),{headers:this._headers,method:"PATCH",body:JSON.stringify({name:t,description:n})}).then(this._handleServerResponse)}},{key:"getCardList",value:function(e){var t=e.title,n=e.link;return fetch("".concat(this._baseUrl,"/cards"),{headers:this._headers,method:"POST",body:JSON.stringify({title:t,link:n})}).then(this._handleServerResponse)}},{key:"addCard",value:function(e){var t=e.title,n=e.link;return fetch("".concat(this._baseUrl,"/cards"),{headers:this._headers,method:"POST",body:JSON.stringify({title:t,link:n})}).then(this._handleServerResponse)}},{key:"setCardLikes",value:function(){return fetch("".concat(this._baseUrl,"/cards/likes/cardId"),{headers:this._headers}).then(this._handleServerResponse)}},{key:"toggleCardLikeStatus",value:function(e,t){return fetch("".concat(this._baseUrl,"/cards/likes/").concat(e),{headers:this._headers,method:t?"PUT":"DELETE"}).then(this._handleServerResponse)}},{key:"setUserAvatar",value:function(e){var t=e.avatar;return fetch("".concat(this._baseUrl,"/users/me/avatar "),{headers:this._headers,method:"PATCH",body:JSON.stringify({avatar:t})}).then(this._handleServerResponse)}}])&&t(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),e}();function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(){function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._items=r,this._renderer=o,this._container=document.querySelector(n)}var t,n;return t=e,(n=[{key:"renderItems",value:function(){this._items.forEach(this._renderer)}},{key:"addItem",value:function(e){this._container.prepend(e)}}])&&r(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function e(t,n){var r=t.data,o=t.handleCardClick;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._text=r.name,this._link=r.link,this._handleCardClick=o,this._cardSelector=n}var t,n;return t=e,(n=[{key:"_getTemplate",value:function(){return document.querySelector(this._cardSelector).content.querySelector(".element").cloneNode(!0)}},{key:"_setEventListeners",value:function(){var e=this;this._element.querySelector(".element__like-button").addEventListener("click",(function(t){e._handleLikeButton()})),this._element.querySelector(".element__trash-button").addEventListener("click",(function(t){e._handleTrashButton()})),this._element.querySelector(".element__image").addEventListener("click",(function(t){return e._handleCardClick({link:e._link,text:e._text})}))}},{key:"_handleLikeButton",value:function(){this._element.querySelector(".element__like-button").classList.toggle("element__like-button_full")}},{key:"_handleTrashButton",value:function(){this._element.remove(),this.element=null}},{key:"getView",value:function(){this._element=this._getTemplate(),this._setEventListeners();var e=this._element.querySelector(".element__image");return e.src=this._link,e.alt=this._text,this._element.querySelector(".element__title").textContent=this._text,this._element}},{key:"_uodateLikesView",value:function(){this._element.querySelector()}}])&&i(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popupElement=document.querySelector(t),this._handleEscClose=this._handleEscClose.bind(this)}var t,n;return t=e,(n=[{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"setEventListeners",value:function(){var e=this;this._popupElement.addEventListener("mousedown",(function(t){(t.target.classList.contains("popup_open")||t.target.classList.contains("popup__close-button"))&&e.close()}))}},{key:"open",value:function(){this._popupElement.classList.add("popup_open"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popupElement.classList.remove("popup_open"),document.removeEventListener("keydown",this._handleEscClose)}}])&&u(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(){return p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=f(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},p.apply(this,arguments)}function f(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=y(e)););return e}function h(e,t){return h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},h(e,t)}function d(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=y(r);if(o){var n=y(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return d(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e))._imageElement=t._popupElement.querySelector(".popup__preview-image"),t._imageCaption=t._popupElement.querySelector(".popup__caption"),t}return t=a,(n=[{key:"open",value:function(e){this._imageElement.src=e.link,this._imageCaption.textContent=e.text,this._imageElement.alt=e.text,p(y(a.prototype),"open",this).call(this)}}])&&c(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(s);function _(e){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(){return b="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=E(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},b.apply(this,arguments)}function E(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=S(e)););return e}function k(e,t){return k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},k(e,t)}function g(e,t){if(t&&("object"===_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function S(e){return S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},S(e)}var w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&k(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=S(r);if(o){var n=S(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return g(this,e)});function a(e){var t,n=e.popupSelector,r=e.handleFormSubmit;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,n))._popupForm=t._popupElement.querySelector(".popup__form"),t._handleFormSubmit=r,t._inputList=t._popupElement.querySelectorAll(".popup__input"),t}return t=a,(n=[{key:"_getInputValues",value:function(){var e=this;return this._formValues={},this._inputList.forEach((function(t){return e._formValues[t.name]=t.value})),this._formValues}},{key:"setEventListeners",value:function(){var e=this;this._popupElement.addEventListener("submit",(function(t){t.preventDefault(),e._handleFormSubmit(e._getInputValues()),e.close()})),b(S(a.prototype),"setEventListeners",this).call(this)}},{key:"close",value:function(){this._popupForm.reset(),b(S(a.prototype),"close",this).call(this)}}])&&v(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(s);function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var L=function(){function e(t){var n=t.userNameSelector,r=t.userDescriptionSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._userNameElement=document.querySelector(n),this._userDescriptionElement=document.querySelector(r)}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{name:this._userNameElement.textContent,description:this._userDescriptionElement.textContent}}},{key:"setUserInfo",value:function(e){this._userNameElement.textContent=e.Name,this._userDescriptionElement.textContent=e.Description}}])&&O(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var P=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._inputSelector=t.inputSelector,this._inputTextError=t.inputTextError,this._inputVisibleError=t.inputVisibleError,this._submitButtonSelector=t.submitButtonSelector,this._inactiveButtonClass=t.inactiveButtonClass,this._formEl=n}var t,n;return t=e,(n=[{key:"_addInputError",value:function(e){e.classList.add(this._inputTextError)}},{key:"_removeInputError",value:function(e){e.classList.remove(this._inputTextError)}},{key:"_showMessageError",value:function(e){var t=this._formEl.querySelector("#".concat(e.id,"-error"));t.textContent=e.validationMessage,t.classList.add(this._inputVisibleError)}},{key:"_hideMessageError",value:function(e){var t=this._formEl.querySelector("#".concat(e.id,"-error"));t.textContent=" ",t.classList.remove(this._inputVisibleError)}},{key:"_hasInvalidInput",value:function(e){return e.some((function(e){return!e.validity.valid}))}},{key:"_checkInputValidity",value:function(e){e.validity.valid?(this._hideMessageError(e),this._removeInputError(e)):(this._showMessageError(e),this._addInputError(e))}},{key:"_toggleButton",value:function(){this._hasInvalidInput(this._inputList)?(this._buttonEl.disabled=!0,this._buttonEl.classList.add(this._inactiveButtonClass)):(this._buttonEl.classList.remove(this._inactiveButtonClass),this._buttonEl.disabled=!1)}},{key:"_setEventListeners",value:function(){var e,t=this;this._inputList=function(e){if(Array.isArray(e))return j(e)}(e=this._formEl.querySelectorAll(this._inputSelector))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return j(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?j(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),this._buttonEl=this._formEl.querySelector(this._submitButtonSelector),this._inputList.forEach((function(e){e.addEventListener("input",(function(){t._checkInputValidity(e),t._toggleButton()}))})),this.resetValidation()}},{key:"resetValidation",value:function(){var e=this;this._inputList.forEach((function(t){e._hideMessageError(t),e._removeInputError(t)})),this._toggleButton()}},{key:"enableValidation",value:function(){this._formEl.addEventListener("submit",(function(e){e.preventDefault()})),this._setEventListeners()}}])&&C(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),q=document.querySelector(".profile__edit-button"),x=document.querySelector(".profile__add-button"),T=(document.querySelector("#card-template"),document.querySelector(".elements"),document.querySelector("#name-input"),document.querySelector("#description-input"),document.querySelector("#profile-avatar-popup")),I=document.querySelector(".profile__edit-button_type-avatar"),R=(new n({baseUrl:"https://around.nomoreparties.co/v1/group-12",headers:{authorization:"816a5952-0b40-4365-b524-9e18859b6d37","Content-Type":"application/json"}}),new m("#popup-preview")),V=function(e){return new a({data:{name:e.name||e.title,link:e.link},handleCardClick:function(e){R.open(e)}},"#card-template").getView()},B=new o({items:[{name:"Yosemite Valley",link:"https://code.s3.yandex.net/web-code/yosemite.jpg"},{name:"Lake Louise",link:"https://code.s3.yandex.net/web-code/lake-louise.jpg"},{name:"Bald Mountains",link:"https://code.s3.yandex.net/web-code/bald-mountains.jpg"},{name:"Latemar",link:"https://code.s3.yandex.net/web-code/latemar.jpg"},{name:"Vanoise National Park",link:"https://code.s3.yandex.net/web-code/vanoise.jpg"},{name:"Lago di Braies",link:"https://code.s3.yandex.net/web-code/lago.jpg"}],renderer:function(e){B.addItem(V(e))}},".elements"),U=new L({userNameSelector:"#edit-card-name",userDescriptionSelector:"#edit-card-description"}),A=new w({popupSelector:"#edit-profile-popup",handleFormSubmit:function(e){U.setUserInfo(e)}}),D=new w({popupSelector:"#add-card-popup",handleFormSubmit:function(e){B.addItem(V(e))}}),N=new P(e,document.querySelector("#edit-profile-form")),M=new P(e,document.querySelector("#new-card-form"));q.addEventListener("click",(function(e){var t=U.getUserInfo();document.querySelector("#name-input").setAttribute("value",t.name),document.querySelector("#description-input").setAttribute("value",t.description),A.open(t)})),x.addEventListener("click",(function(e){D.open(),M.resetValidation()})),I.addEventListener("click",(function(e){T.open(),M.resetValidation()})),B.renderItems(),R.setEventListeners(),A.setEventListeners(),D.setEventListeners(),N.enableValidation(),M.enableValidation()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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N0QsRUFBYyxDQUNyQ2IsY0FBZSxrQkFDZmMsaUJBQWtCLFNBQUN0QyxHQUNqQjZGLEVBQVlDLFFBQVFMLEVBQWN6RixPQUtoQ21HLEVBQW9CLElBQUkzQyxFQUM1QnZHLEVBQ0F3QyxTQUFTQyxjQUFjLHVCQUduQjBHLEVBQW9CLElBQUk1QyxFQUM1QnZHLEVBQ0F3QyxTQUFTQyxjQUFjLG1CQU96QnlGLEVBQWtCMUUsaUJBQWlCLFNBQVMsU0FBQ0MsR0FDM0MsSUFBTTJGLEVBQWtCTixFQUFTTyxjQUNqQzdHLFNBQVNDLGNBQWMsZUFBZTZHLGFBQWEsUUFBU0YsRUFBZSxNQUMzRTVHLFNBQVNDLGNBQWMsc0JBQXNCNkcsYUFBYSxRQUFTRixFQUFlLGFBRWxGTCxFQUFjTCxLQUFLVSxNQUlyQmpCLEVBQWMzRSxpQkFBaUIsU0FBUyxTQUFDQyxHQUN2Q3dGLEVBQWFQLE9BRWJTLEVBQWtCbEIscUJBSXBCSSxFQUFvQjdFLGlCQUFpQixTQUFTLFNBQUNDLEdBQzdDMkUsRUFBbUJNLE9BRW5CUyxFQUFrQmxCLHFCQUtwQlcsRUFBWVcsY0FDWmpCLEVBQVlrQixvQkFDWlQsRUFBY1Msb0JBQ2RQLEVBQWFPLG9CQUNiTixFQUFrQk8sbUJBQ2xCTixFQUFrQk0sbUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWJfcHJvamVjdF84Ly4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF84Ly4vc3JjL2NvbXBvbmVudHMvQXBpLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzgvLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzgvLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzgvLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF84Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfOC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfOC8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzgvLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzgvLi9zcmMvcGFnZXMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFtcbiAge1xuICAgIG5hbWU6IFwiWW9zZW1pdGUgVmFsbGV5XCIsXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS95b3NlbWl0ZS5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTGFrZSBMb3Vpc2VcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xha2UtbG91aXNlLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJCYWxkIE1vdW50YWluc1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvYmFsZC1tb3VudGFpbnMuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkxhdGVtYXJcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xhdGVtYXIuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIlZhbm9pc2UgTmF0aW9uYWwgUGFya1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvdmFub2lzZS5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTGFnbyBkaSBCcmFpZXNcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xhZ28uanBnXCIsXG4gIH0sXG5dO1xuXG5leHBvcnQgY29uc3QgdmFsaWRhdGlvblNldHRpbmdzID0ge1xuICBmb3JtU2VsZWN0b3I6IFwiLnBvcHVwX19mb3JtXCIsXG4gIGlucHV0U2VsZWN0b3I6IFwiLnBvcHVwX19pbnB1dFwiLFxuICBpbnB1dFRleHRFcnJvcjogXCJwb3B1cF9faW5wdXRfaGFzLWVycm9yXCIsXG4gIGlucHV0VmlzaWJsZUVycm9yOiBcInBvcHVwX190ZXh0LWVycm9yX3Zpc2libGVcIixcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLnBvcHVwX19zdWJtaXQtYnV0dG9uXCIsXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwicG9wdXBfX3N1Ym1pdC1idXR0b25fZGlzYWJsZWRcIixcbn07IiwiY2xhc3MgQXBpIHtcbiAgY29uc3RydWN0b3Ioe2Jhc2VVcmwsIGhlYWRlcnN9KSB7XG4gICAgdGhpcy5fYmFzZVVybCA9IGJhc2VVcmw7XG4gICAgdGhpcy5faGVhZGVycyA9IGhlYWRlcnM7XG4gIH1cblxuLy9hZGQgJHtyZXMuc3RhdHVzfSB0byBpbmRleCBmaWxlIHRvIGJlIHBpY2tlZCB1cFxuX2hhbmRsZVNlcnZlclJlc3BvbnNlKHJlcykge1xuICByZXR1cm4gcmVzLm9rPyByZXMuanNvbigpIDogUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XG59XG5cbiBnZXRVc2VySW5mbygpIHtcbiAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcbiAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KS50aGVuKHRoaXMuX2hhbmRsZVNlcnZlclJlc3BvbnNlKTtcbiB9XG5cbiBzZXRVc2VySW5mbyh7bmFtZSwgZGVzY3JpcHRpb259KSB7XG4gICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWUgYCwge1xuICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgIG5hbWUsXG4gICAgICAgZGVzY3JpcHRpb24sXG4gICAgIH0pLFxuICAgfSkudGhlbih0aGlzLl9oYW5kbGVTZXJ2ZXJSZXNwb25zZSk7XG4gfVxuXG4gZ2V0Q2FyZExpc3Qoe3RpdGxlLGxpbmt9KSB7XG4gICByZXR1cm4gZmV0Y2ggKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xuICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgdGl0bGUsXG4gICAgICAgbGluayxcbiAgICAgfSksXG4gICB9KS50aGVuKHRoaXMuX2hhbmRsZVNlcnZlclJlc3BvbnNlKTtcbiB9XG5cbiBhZGRDYXJkKHt0aXRsZSxsaW5rfSkge1xuICAgcmV0dXJuIGZldGNoIChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcbiAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgIHRpdGxlLFxuICAgICAgIGxpbmssXG4gICAgIH0pLFxuICAgfSkudGhlbih0aGlzLl9oYW5kbGVTZXJ2ZXJSZXNwb25zZSk7XG4gfVxuXG4gc2V0Q2FyZExpa2VzKCkge1xuICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzL2xpa2VzL2NhcmRJZGAsIHtcbiAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KS50aGVuKHRoaXMuX2hhbmRsZVNlcnZlclJlc3BvbnNlKTtcbiB9XG5cbnRvZ2dsZUNhcmRMaWtlU3RhdHVzKGNhcmRJZCwgbGlrZSkge1xuICAgcmV0dXJuIGZldGNoIChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy9saWtlcy8ke2NhcmRJZH1gLCB7XG4gICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgIG1ldGhvZDogbGlrZSA/IFwiUFVUXCIgOiBcIkRFTEVURVwiLFxuICAgfSkudGhlbih0aGlzLl9oYW5kbGVTZXJ2ZXJSZXNwb25zZSk7XG4gfVxuXG5cbnNldFVzZXJBdmF0YXIoe2F2YXRhcn0pIHtcbiAgIHJldHVybiBmZXRjaCAoYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWUvYXZhdGFyIGAsIHtcbiAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICBhdmF0YXIsXG4gICAgIH0pLFxuICAgfSkudGhlbih0aGlzLl9oYW5kbGVTZXJ2ZXJSZXNwb25zZSk7XG4gfVxuXG5cbi8vICAgZGVsZXRlQ2FyZChpZCkge1xuLy8gICAgcmV0dXJuIGZldGNoIChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH1gLCB7XG4vLyAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4vLyAgICAgIG1ldGhvZDogXCJERUxFVEVcIlxuLy8gICAgfSkudGhlbih0aGlzLl9oYW5kbGVTZXJ2ZXJSZXNwb25zZSk7XG4vLyAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBBcGk7XG4iLCJjbGFzcyBTZWN0aW9uIHtcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY29udGFpbmVyc2VsZWN0b3IpIHtcbiAgICB0aGlzLl9pdGVtcyA9IGl0ZW1zO1xuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XG5cbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lcnNlbGVjdG9yKTtcbn1cblxuICByZW5kZXJJdGVtcygpIHtcbiAgICB0aGlzLl9pdGVtcy5mb3JFYWNoKHRoaXMuX3JlbmRlcmVyKTtcbiAgfVxuXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFNlY3Rpb247XG4iLCJpbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcblxuY2xhc3MgQ2FyZCB7XG4gIGNvbnN0cnVjdG9yKHsgZGF0YSwgaGFuZGxlQ2FyZENsaWNrIH0sIGNhcmRTZWxlY3Rvcikge1xuICAgIHRoaXMuX3RleHQgPSBkYXRhLm5hbWU7XG4gICAgdGhpcy5fbGluayA9IGRhdGEubGluaztcbiAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sgPSBoYW5kbGVDYXJkQ2xpY2s7XG5cbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XG4gIH1cblxuICBfZ2V0VGVtcGxhdGUoKSB7XG4gIFx0Y29uc3QgY2FyZEVsZW1lbnQgPSBkb2N1bWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKVxuICAgICAgLmNvbnRlbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRcIilcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XG5cbiAgICByZXR1cm4gY2FyZEVsZW1lbnQ7XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7IFxuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X19saWtlLWJ1dHRvblwiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2dCkgPT4geyBcbiAgICAgIHRoaXMuX2hhbmRsZUxpa2VCdXR0b24oKTsgXG4gICAgfSk7IFxuXG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX3RyYXNoLWJ1dHRvblwiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2dCkgPT4geyBcbiAgICAgIHRoaXMuX2hhbmRsZVRyYXNoQnV0dG9uKCk7IFxuICAgIH0pOyBcblxuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X19pbWFnZVwiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2dCkgPT4gXG4gICAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sgKHsgXG4gICAgICAgIGxpbms6IHRoaXMuX2xpbmssIFxuICAgICAgICB0ZXh0OiB0aGlzLl90ZXh0LCBcbiAgICAgICAgfSkgXG4gICAgKTsgXG4gIH0gXG5cbiAgX2hhbmRsZUxpa2VCdXR0b24oKSB7XG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX2xpa2UtYnV0dG9uXCIpLmNsYXNzTGlzdC50b2dnbGUoXCJlbGVtZW50X19saWtlLWJ1dHRvbl9mdWxsXCIpO1xuICB9XG4gIFxuICBfaGFuZGxlVHJhc2hCdXR0b24oKSB7XG4gICAgdGhpcy5fZWxlbWVudC5yZW1vdmUoKTtcblxuICAgIHRoaXMuZWxlbWVudCA9IG51bGw7XG4gIH1cblxuICBnZXRWaWV3KCkge1xuICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG5cbiAgICBjb25zdCBjYXJkSW1hZ2UgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9faW1hZ2VcIik7XG4gICAgY2FyZEltYWdlLnNyYyA9IHRoaXMuX2xpbms7XG4gICAgY2FyZEltYWdlLmFsdCA9IHRoaXMuX3RleHQ7IFxuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X190aXRsZVwiKS50ZXh0Q29udGVudCA9IHRoaXMuX3RleHQ7XG5cbiAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcbiAgfVxuXG4gIF91b2RhdGVMaWtlc1ZpZXcoKSB7XG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKClcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBDYXJkO1xuIiwiY2xhc3MgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZSA9IHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcyk7XG4gIH0gICAgXG5cbiAgX2hhbmRsZUVzY0Nsb3NlKGV2dCkge1xuICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgKGV2dCkgPT4ge1xuICAgICAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwicG9wdXBfb3BlblwiKSB8fCBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcInBvcHVwX19jbG9zZS1idXR0b25cIikpXG4gICAgICAgIHtcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgb3BlbigpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcInBvcHVwX29wZW5cIik7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJwb3B1cF9vcGVuXCIpO1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBQb3B1cDtcblxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwLmpzXCI7XG5cbmNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuICAgIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgICAgdGhpcy5faW1hZ2VFbGVtZW50ID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX3ByZXZpZXctaW1hZ2VcIik7XG4gICAgICB0aGlzLl9pbWFnZUNhcHRpb24gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fY2FwdGlvblwiKTtcbiAgICAgIH1cblxuICBvcGVuKGRhdGEpIHtcbiAgICB0aGlzLl9pbWFnZUVsZW1lbnQuc3JjID0gZGF0YS5saW5rO1xuICAgIHRoaXMuX2ltYWdlQ2FwdGlvbi50ZXh0Q29udGVudCA9IGRhdGEudGV4dDtcbiAgICB0aGlzLl9pbWFnZUVsZW1lbnQuYWx0ID0gZGF0YS50ZXh0O1xuICAgIHN1cGVyLm9wZW4oKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBQb3B1cFdpdGhJbWFnZTsiLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXAuanNcIjtcblxuY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3Ioe3BvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXR9KSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgXG4gICAgdGhpcy5fcG9wdXBGb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Zvcm1cIik7XG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XG4gICAgdGhpcy5faW5wdXRMaXN0ID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIucG9wdXBfX2lucHV0XCIpO1xuXG4gIH1cblxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgdGhpcy5fZm9ybVZhbHVlcyA9IHt9OyBcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCggXG4gICAgICAoaW5wdXQpID0+ICh0aGlzLl9mb3JtVmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWUpXG4gICAgKTsgXG5cbiAgICByZXR1cm4gdGhpcy5fZm9ybVZhbHVlcztcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkgeyBcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7IFxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7IFxuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTsgXG5cbiAgICAgIHRoaXMuY2xvc2UoKTsgXG4gICAgfSk7IFxuXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfSBcblxuICBjbG9zZSgpIHsgXG4gICAgdGhpcy5fcG9wdXBGb3JtLnJlc2V0KCk7IFxuXG4gICAgc3VwZXIuY2xvc2UoKTsgXG5cbiAgfSBcbn0gXG5cbiBcblxuZXhwb3J0IGRlZmF1bHQgUG9wdXBXaXRoRm9ybTsiLCJjbGFzcyBVc2VySW5mbyB7XG4gIGNvbnN0cnVjdG9yKHsgdXNlck5hbWVTZWxlY3RvciwgdXNlckRlc2NyaXB0aW9uU2VsZWN0b3IgfSkge1xuICAgIHRoaXMuX3VzZXJOYW1lRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodXNlck5hbWVTZWxlY3Rvcik7XG4gICAgdGhpcy5fdXNlckRlc2NyaXB0aW9uRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodXNlckRlc2NyaXB0aW9uU2VsZWN0b3IpO1xuICB9XG5cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgcmV0dXJuIHsgXG4gICAgICBuYW1lOiB0aGlzLl91c2VyTmFtZUVsZW1lbnQudGV4dENvbnRlbnQsIFxuICAgICAgZGVzY3JpcHRpb246IHRoaXMuX3VzZXJEZXNjcmlwdGlvbkVsZW1lbnQudGV4dENvbnRlbnQsIFxuICAgIH07IFxuICB9IFxuXG4gIHNldFVzZXJJbmZvKGRhdGEpIHsgXG4gICAgdGhpcy5fdXNlck5hbWVFbGVtZW50LnRleHRDb250ZW50ID0gZGF0YS5OYW1lOyBcbiAgICB0aGlzLl91c2VyRGVzY3JpcHRpb25FbGVtZW50LnRleHRDb250ZW50ID0gZGF0YS5EZXNjcmlwdGlvbjsgXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgVXNlckluZm87XG4iLCJjbGFzcyBGb3JtVmFsaWRhdG9yIHtcbiAgY29uc3RydWN0b3Ioc2V0dGluZ3MsIGZvcm1FbCkge1xuICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBzZXR0aW5ncy5pbnB1dFNlbGVjdG9yO1xuICAgIHRoaXMuX2lucHV0VGV4dEVycm9yID0gc2V0dGluZ3MuaW5wdXRUZXh0RXJyb3I7XG4gICAgdGhpcy5faW5wdXRWaXNpYmxlRXJyb3IgPSBzZXR0aW5ncy5pbnB1dFZpc2libGVFcnJvcjtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IHNldHRpbmdzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBzZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xuXG4gICAgdGhpcy5fZm9ybUVsID0gZm9ybUVsO1xuICB9XG5cbiAgX2FkZElucHV0RXJyb3IoaW5wdXRFbCkge1xuICAgIGlucHV0RWwuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dFRleHRFcnJvcik7XG4gIH1cblxuICBfcmVtb3ZlSW5wdXRFcnJvcihpbnB1dEVsKSB7XG4gICAgaW5wdXRFbC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0VGV4dEVycm9yKTtcbiAgfVxuXG4gIF9zaG93TWVzc2FnZUVycm9yKGlucHV0RWwpIHtcbiAgICBjb25zdCBlcnJvckRpc3BsYXkgPSB0aGlzLl9mb3JtRWwucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbC5pZH0tZXJyb3JgKTtcbiAgICBlcnJvckRpc3BsYXkudGV4dENvbnRlbnQgPSBpbnB1dEVsLnZhbGlkYXRpb25NZXNzYWdlO1xuICAgIGVycm9yRGlzcGxheS5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0VmlzaWJsZUVycm9yKTtcbiAgfVxuXG4gIF9oaWRlTWVzc2FnZUVycm9yKGlucHV0RWwpIHtcbiAgICBjb25zdCBlcnJvckRpc3BsYXkgPSB0aGlzLl9mb3JtRWwucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbC5pZH0tZXJyb3JgKTtcbiAgICBlcnJvckRpc3BsYXkudGV4dENvbnRlbnQgPSBcIiBcIjtcbiAgICBlcnJvckRpc3BsYXkuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dFZpc2libGVFcnJvcik7XG4gIH1cblxuICBfaGFzSW52YWxpZElucHV0KGlucHV0TGlzdCkge1xuICAgIHJldHVybiBpbnB1dExpc3Quc29tZSgoaW5wdXRFbCkgPT4ge1xuICAgICAgcmV0dXJuICFpbnB1dEVsLnZhbGlkaXR5LnZhbGlkO1xuICAgIH0pO1xuICB9XG5cbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsKSB7XG4gICAgaWYgKGlucHV0RWwudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIHRoaXMuX2hpZGVNZXNzYWdlRXJyb3IoaW5wdXRFbCk7XG4gICAgICB0aGlzLl9yZW1vdmVJbnB1dEVycm9yKGlucHV0RWwpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9zaG93TWVzc2FnZUVycm9yKGlucHV0RWwpO1xuICAgICAgdGhpcy5fYWRkSW5wdXRFcnJvcihpbnB1dEVsKTtcbiAgICB9XG4gIH1cblxuICBfdG9nZ2xlQnV0dG9uKCkge1xuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQodGhpcy5faW5wdXRMaXN0KSkge1xuICAgICAgdGhpcy5fYnV0dG9uRWwuZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgdGhpcy5fYnV0dG9uRWwuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fYnV0dG9uRWwuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICAgIHRoaXMuX2J1dHRvbkVsLmRpc2FibGVkID0gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2lucHV0TGlzdCA9IFsuLi50aGlzLl9mb3JtRWwucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKV07XG5cbiAgICB0aGlzLl9idXR0b25FbCA9IHRoaXMuX2Zvcm1FbC5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcblxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsKSA9PiB7XG4gICAgICBpbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsKTtcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uKCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICB0aGlzLnJlc2V0VmFsaWRhdGlvbigpO1xuICB9XG5cbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsKSA9PiB7XG4gICAgICB0aGlzLl9oaWRlTWVzc2FnZUVycm9yKGlucHV0RWwpO1xuICAgICAgdGhpcy5fcmVtb3ZlSW5wdXRFcnJvcihpbnB1dEVsKTsgXG4gIH0pXG4gLy8gdG9nZ2xlIGJ1dHRvbiBzdGF0ZVxuICB0aGlzLl90b2dnbGVCdXR0b24oKTsgXG4gIH1cblxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX2Zvcm1FbC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0pO1xuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgRm9ybVZhbGlkYXRvcjtcbiIsImltcG9ydCBcIi4uL3BhZ2VzL2luZGV4LmNzc1wiO1xuXG4vL2ltcG9ydCBhbGwgY2xhc3Nlc1xuaW1wb3J0IHtpbml0aWFsQ2FyZHMsIHZhbGlkYXRpb25TZXR0aW5nc30gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xuaW1wb3J0IEFwaSBmcm9tIFwiLi4vY29tcG9uZW50cy9BcGkuanNcIjtcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb25cIjtcbmltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybVwiO1xuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XG5cbmNvbnN0IGVkaXRQcm9maWxlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19lZGl0LWJ1dHRvblwiKTtcbmNvbnN0IGFkZENhcmRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2FkZC1idXR0b25cIik7XG5jb25zdCBjYXJkU2VsZWN0b3IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2NhcmQtdGVtcGxhdGVcIik7XG5jb25zdCBjYXJkTGlzdFNlbGVjdG9yID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c1wiKTtcbmNvbnN0IG5hbWVJbnB1dEVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNuYW1lLWlucHV0XCIpO1xuY29uc3QgZGVzY3JpcHRpb25JbnB1dEVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNkZXNjcmlwdGlvbi1pbnB1dFwiKTtcbmNvbnN0IHByb2ZpbGVBdmF0YXJQb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1hdmF0YXItcG9wdXBcIik7XG5jb25zdCBwcm9maWxlQXZhdGFyQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19lZGl0LWJ1dHRvbl90eXBlLWF2YXRhclwiKTtcbi8qY3JlYXRlIGluc3RhbmNlcyBvZiB0aGUgY2xhc3NlcyAqL1xuXG4vL0FwaSBpbnN0YW5jZVxuY29uc3QgYXBpID0gbmV3IEFwaSh7XG4gIGJhc2VVcmw6IFwiaHR0cHM6Ly9hcm91bmQubm9tb3JlcGFydGllcy5jby92MS9ncm91cC0xMlwiLFxuICBoZWFkZXJzOiB7XG4gICAgYXV0aG9yaXphdGlvbjogXCI4MTZhNTk1Mi0wYjQwLTQzNjUtYjUyNC05ZTE4ODU5YjZkMzdcIixcbiAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgfSxcbn0pO1xuICBcbi8vUG9wdXBXaXRoSW1hZ2UgaW5zdGFuY2VcbmNvbnN0IGNhcmRQcmV2aWV3ID0gbmV3IFBvcHVwV2l0aEltYWdlKFwiI3BvcHVwLXByZXZpZXdcIik7XG5cbi8vQ2FyZCBpbnN0YW5jZVxuY29uc3QgY3JlYXRlTmV3Q2FyZCA9IChkYXRhKSA9PiB7XG4gICAgICBjb25zdCBjYXJkID0gbmV3IENhcmQoXG4gICAge1xuICAgICAgZGF0YTogeyBuYW1lOiBkYXRhLm5hbWUgfHwgZGF0YS50aXRsZSwgbGluazogZGF0YS5saW5rIH0sXG4gICAgICBoYW5kbGVDYXJkQ2xpY2s6IChpbWdEYXRhKSA9PiB7XG4gICAgICAgIGNhcmRQcmV2aWV3Lm9wZW4oaW1nRGF0YSk7XG4gICAgICB9LFxuICAgIH0sXG4gICAgXCIjY2FyZC10ZW1wbGF0ZVwiXG4gICk7XG4gIHJldHVybiBjYXJkLmdldFZpZXcoKTtcbn1cblxuLy9TZWN0aW9uIGluc3RhbmNlXG5jb25zdCBjYXJkU2VjdGlvbiA9IG5ldyBTZWN0aW9uKFxuICB7XG4gICAgaXRlbXM6IGluaXRpYWxDYXJkcyxcbiAgICByZW5kZXJlcjogKGRhdGEpID0+IHtcbiAgICAgIGNhcmRTZWN0aW9uLmFkZEl0ZW0oY3JlYXRlTmV3Q2FyZChkYXRhKSk7XG4gICAgfSxcbiAgfSxcbiAgXCIuZWxlbWVudHNcIlxuKTtcblxuLy9Vc2VySW5mbyBpbnN0YW5jZVxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oe1xuICB1c2VyTmFtZVNlbGVjdG9yOiBcIiNlZGl0LWNhcmQtbmFtZVwiLFxuICB1c2VyRGVzY3JpcHRpb25TZWxlY3RvcjogXCIjZWRpdC1jYXJkLWRlc2NyaXB0aW9uXCIsXG59KTtcblxuLy9Qb3B1cFdpdGhGb3JtIGluc3RhbmNlIGZvciBlZGl0IHByb2ZpbGUgcG9wdXBcbmNvbnN0IHVzZXJJbmZvUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybSh7XG4gIHBvcHVwU2VsZWN0b3I6IFwiI2VkaXQtcHJvZmlsZS1wb3B1cFwiLFxuICBoYW5kbGVGb3JtU3VibWl0OiAoZGF0YSkgPT4geyAgIFxuICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKGRhdGEpO1xuICB9LFxufSk7XG5cbi8vUG9wdXBXaXRoRm9ybSBpbnN0YW5jZSBuZXcgY2FyZCBwb3B1cFxuY29uc3QgbmV3Q2FyZFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xuICBwb3B1cFNlbGVjdG9yOiBcIiNhZGQtY2FyZC1wb3B1cFwiLFxuICBoYW5kbGVGb3JtU3VibWl0OiAoZGF0YSkgPT4ge1xuICAgIGNhcmRTZWN0aW9uLmFkZEl0ZW0oY3JlYXRlTmV3Q2FyZChkYXRhKSk7IFxuICB9LCBcbn0pOyBcblxuLy8vRm9ybVZhbGlkYXRvciBpbnN0YW5jZVxuY29uc3QgZWRpdEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihcbiAgdmFsaWRhdGlvblNldHRpbmdzLFxuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2VkaXQtcHJvZmlsZS1mb3JtXCIpXG4pO1xuXG5jb25zdCBjYXJkRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKFxuICB2YWxpZGF0aW9uU2V0dGluZ3MsXG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbmV3LWNhcmQtZm9ybVwiKVxuKTtcblxuXG4vKmV2ZW50IGxpc3RlbmVycyBmb3IgcGFnZSovXG5cbi8vZWRpdCBwcm9maWxlIG9wZW4gcG9wdXAgXG5lZGl0UHJvZmlsZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2dCkgPT4ge1xuICBjb25zdCBjdXJyZW50VXNlcmluZm8gPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI25hbWUtaW5wdXRcIikuc2V0QXR0cmlidXRlKCd2YWx1ZScsIGN1cnJlbnRVc2VyaW5mb1snbmFtZSddKTtcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNkZXNjcmlwdGlvbi1pbnB1dFwiKS5zZXRBdHRyaWJ1dGUoJ3ZhbHVlJywgY3VycmVudFVzZXJpbmZvWydkZXNjcmlwdGlvbiddKTtcblxuICB1c2VySW5mb1BvcHVwLm9wZW4oY3VycmVudFVzZXJpbmZvKTtcbn0pO1xuXG4vL25ldyBjYXJkIG9wZW4gcG9wdXAgXG5hZGRDYXJkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZ0KSA9PiB7XG4gIG5ld0NhcmRQb3B1cC5vcGVuKCk7XG5cbiAgY2FyZEZvcm1WYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XG59KTtcblxuLy9lZGl0IHByb2ZpbGUgaW1hZ2UgIHBvcHVwIFxucHJvZmlsZUF2YXRhckJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2dCkgPT4ge1xuICBwcm9maWxlQXZhdGFyUG9wdXAub3BlbigpO1xuXG4gIGNhcmRGb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xufSk7XG5cblxuLy9pbml0aWFsaXplIGFsbCBteSBpbnN0YW5jZXNcbmNhcmRTZWN0aW9uLnJlbmRlckl0ZW1zKCk7XG5jYXJkUHJldmlldy5zZXRFdmVudExpc3RlbmVycygpO1xudXNlckluZm9Qb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xubmV3Q2FyZFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5lZGl0Rm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG5jYXJkRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG4iXSwibmFtZXMiOlsidmFsaWRhdGlvblNldHRpbmdzIiwiZm9ybVNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsImlucHV0VGV4dEVycm9yIiwiaW5wdXRWaXNpYmxlRXJyb3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJBcGkiLCJiYXNlVXJsIiwiaGVhZGVycyIsInRoaXMiLCJfYmFzZVVybCIsIl9oZWFkZXJzIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsImZldGNoIiwidGhlbiIsIl9oYW5kbGVTZXJ2ZXJSZXNwb25zZSIsIm5hbWUiLCJkZXNjcmlwdGlvbiIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwidGl0bGUiLCJsaW5rIiwiY2FyZElkIiwibGlrZSIsImF2YXRhciIsIlNlY3Rpb24iLCJjb250YWluZXJzZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiZm9yRWFjaCIsImVsZW1lbnQiLCJwcmVwZW5kIiwiQ2FyZCIsImNhcmRTZWxlY3RvciIsImRhdGEiLCJoYW5kbGVDYXJkQ2xpY2siLCJfdGV4dCIsIl9saW5rIiwiX2hhbmRsZUNhcmRDbGljayIsIl9jYXJkU2VsZWN0b3IiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX2VsZW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwiZXZ0IiwiX2hhbmRsZUxpa2VCdXR0b24iLCJfaGFuZGxlVHJhc2hCdXR0b24iLCJ0ZXh0IiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwicmVtb3ZlIiwiX2dldFRlbXBsYXRlIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiY2FyZEltYWdlIiwic3JjIiwiYWx0IiwidGV4dENvbnRlbnQiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXBFbGVtZW50IiwiX2hhbmRsZUVzY0Nsb3NlIiwiYmluZCIsImtleSIsImNsb3NlIiwidGFyZ2V0IiwiY29udGFpbnMiLCJhZGQiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiUG9wdXBXaXRoSW1hZ2UiLCJfaW1hZ2VFbGVtZW50IiwiX2ltYWdlQ2FwdGlvbiIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0IiwiX3BvcHVwRm9ybSIsIl9oYW5kbGVGb3JtU3VibWl0IiwiX2lucHV0TGlzdCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJfZm9ybVZhbHVlcyIsImlucHV0IiwidmFsdWUiLCJwcmV2ZW50RGVmYXVsdCIsIl9nZXRJbnB1dFZhbHVlcyIsInJlc2V0IiwiVXNlckluZm8iLCJ1c2VyTmFtZVNlbGVjdG9yIiwidXNlckRlc2NyaXB0aW9uU2VsZWN0b3IiLCJfdXNlck5hbWVFbGVtZW50IiwiX3VzZXJEZXNjcmlwdGlvbkVsZW1lbnQiLCJOYW1lIiwiRGVzY3JpcHRpb24iLCJGb3JtVmFsaWRhdG9yIiwic2V0dGluZ3MiLCJmb3JtRWwiLCJfaW5wdXRTZWxlY3RvciIsIl9pbnB1dFRleHRFcnJvciIsIl9pbnB1dFZpc2libGVFcnJvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2Zvcm1FbCIsImlucHV0RWwiLCJlcnJvckRpc3BsYXkiLCJpZCIsInZhbGlkYXRpb25NZXNzYWdlIiwiaW5wdXRMaXN0Iiwic29tZSIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGlkZU1lc3NhZ2VFcnJvciIsIl9yZW1vdmVJbnB1dEVycm9yIiwiX3Nob3dNZXNzYWdlRXJyb3IiLCJfYWRkSW5wdXRFcnJvciIsIl9oYXNJbnZhbGlkSW5wdXQiLCJfYnV0dG9uRWwiLCJkaXNhYmxlZCIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJfdG9nZ2xlQnV0dG9uIiwicmVzZXRWYWxpZGF0aW9uIiwiZWRpdFByb2ZpbGVCdXR0b24iLCJhZGRDYXJkQnV0dG9uIiwicHJvZmlsZUF2YXRhclBvcHVwIiwicHJvZmlsZUF2YXRhckJ1dHRvbiIsImNhcmRQcmV2aWV3IiwiYXV0aG9yaXphdGlvbiIsImNyZWF0ZU5ld0NhcmQiLCJpbWdEYXRhIiwib3BlbiIsImdldFZpZXciLCJjYXJkU2VjdGlvbiIsImFkZEl0ZW0iLCJ1c2VySW5mbyIsInVzZXJJbmZvUG9wdXAiLCJzZXRVc2VySW5mbyIsIm5ld0NhcmRQb3B1cCIsImVkaXRGb3JtVmFsaWRhdG9yIiwiY2FyZEZvcm1WYWxpZGF0b3IiLCJjdXJyZW50VXNlcmluZm8iLCJnZXRVc2VySW5mbyIsInNldEF0dHJpYnV0ZSIsInJlbmRlckl0ZW1zIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJlbmFibGVWYWxpZGF0aW9uIl0sInNvdXJjZVJvb3QiOiIifQ==